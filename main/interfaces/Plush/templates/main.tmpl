<%
def getTimeLeft (mbleft, mb, kbpersec):
	timeleft = '&infin;'
	mbleft = float(mbleft)
	mb = float(mb)
	kbpersec = float(kbpersec)
	if kbpersec >= 1 and mb > 0:
		kbleft = mbleft * 1024
		hoursleft = 0
		minsleft = 0
		secsleft = kbleft / kbpersec
		# make calculations
		if secsleft >= 60:
			minsleft = secsleft/60
			secsleft = secsleft%60
		if minsleft >= 60:
			hoursleft = minsleft/60
			minsleft = minsleft%60
		hoursleft = str(int(hoursleft))
		minsleft = str(int(minsleft))
		secsleft = str(int(secsleft))
		# add preceding 0s
		if len(hoursleft) == 1:
			hoursleft = '0'+hoursleft
		if len(minsleft) == 1:
			minsleft = '0'+minsleft
		if len(secsleft) == 1:
			secsleft = '0'+secsleft
		timeleft = hoursleft+'<big>:</big>'+minsleft+'<big>:</big>'+secsleft
	return timeleft
def drawProgressBar (mbleft, mb):
	mbleft = float(mbleft)
	mb = float(mb)
	if mb == 0:
		return '<span class="progressBar percentImage1"><img title="0%" src="static/images/q_progress.png" style="background-position: -120px 0px;"/></span>'
	percentage = int(100 - mbleft / mb * 100)
	postion =  int(120 - 120.0 / 100.0 * percentage)
	if percentage >= 75:
		imgnum = "1" # green
	elif percentage >= 50:
		imgnum = "2" # yellow
	elif percentage >= 25:
		imgnum = "3" # orange
	else:
		imgnum = "4" # red
	return '<div class="progressBarProgress" style="width: '+str(percentage)+'%;"><span>'+str(percentage)+'%</span></div>'
%> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/>
<html>
<head>

	<title>SABnzbd+ Plush</title>
	
	<!-- Favorite Icon -->
	<link rel="shortcut icon" type="image/ico" href="static/images/favicon.ico"/>
	
	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="static/stylesheets/plush.css" media="screen"/>
	
	<!-- News Feeds -->
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="rss?mode=history"/>
	
	<!-- Javascript -->
	<script type="text/javascript" src="static/javascripts/jquery-1.2.1.pack.js"></script>
	<script type="text/javascript" src="static/javascripts/interface.js"></script>
	<script type="text/javascript" src="static/javascripts/plush.js"></script>

</head>
<body>

	
	<!-- Container : Begin -->
	<div id="container">
	
	
		<!-- Top Bar : Begin -->
		<div id="topbar">
		
			<!-- Logo : Begin -->
			<div id="logo">
				<a href="http://www.sabnzbdplus.sourceforge.com" title="SABnzbd+ Version: $version | Plush Version: 1.0.20071128">SABnzbd+ Plush</a>
			</div>
			<!-- Logo : End -->
			
			<!-- Main Menu : Begin -->
			<ul id="menu">
				<li><a id="plusnzb" title="Add an NZB now">+NZB</a></li>
				<li><a id="options" title="View Plush options">Options</a></li>
				<li><a href="connections" title="View the SABnzbd connection" class="greybox">Connections</a></li>
				<li><a href="config" title="Configure Sabnzbd" class="greybox">Config</a></li>
				<li><a href="http://sabnzbdplus.wiki.sourceforge.net/" class="greybox">Help</a></li>
			</ul>
			<!-- Main Menu : End -->
			
		</div>
		<!-- Top Bar : End -->
		
		
		<!-- Options Menu : Begin -->
		<div class="subMenu" id="optionsMenu" style="display:none">
			<div class="layoutContainer">
				<strong>Layout:</strong>
				<img src="static/images/o_sidebyside.png" id="layout_sidebyside" alt="Side by Side" title="Layout: Side by Side" />
				<img src="static/images/o_topbottom.png" id="layout_toptobottom" alt="Top to Bottom" title="Layout: Top to Bottom" />
			</div>
			
			<div class="sliderContainer">
				<div class="refreshTitle">Refresh Time:</div>
				<div class="refreshSlider"><div class="refreshIndicator"></div>
				</div>
				<div class="refreshRate">Every <strong><span id="refreshRateDisplay">4</span></strong> Second(s)</div>
			</div>
			
			<div class="shutdownContainer">
				<a href="shutdown" onclick="confirm('Are you sure you want to shut down the SABnzbd application?')" title="Click here to shut down SABnzbd">Shutdown SAB</a>
			</div>
			
			
<!--
Free in Temp: $diskspace1 GB
Free in Done: $diskspace2 GB
-->


			
		</div>
		<!-- Options Menu : End -->
		
		
		<!-- +NZB Menu : Begin -->
		<div class="subMenu" id="nzbMenu" style="display: none">
			<b>Add NZB: &nbsp;</b>
			<!--#if $varExists('newzbinDetails')#-->
				<input type="text" id="addID" value="by Report ID" size="12" onfocus="if(value=='by Report ID')value=''" onblur="if(!value)value='by Report ID'" />
				<select id="addID_pp">
					<option value="0" title="Do not post-process the NZB file set">-</option>
					<option value="1" title="Repair the NZB file set with PAR2 files">R</option>
					<option value="2" title="Repair &amp; Unpack the NZB file set">U</option>
					<option value="3" title="Repair, Unpack, &amp; Delete the remainder of the NZB file set">D</option>
					<option value="4" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">R+</option>
					<option value="5" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">U+</option>
					<option value="6" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set" selected>D+</option>
				</select>
			<!--#end if#-->
				<input type="text" id="addURL" value="by URL" size="12" onfocus="if(value=='by URL')value=''" onblur="if(!value)value='by URL'" />
				<select id="addURL_pp">
					<option value="0" title="Do not post-process the NZB file set">-</option>
					<option value="1" title="Repair the NZB file set with PAR2 files">R</option>
					<option value="2" title="Repair &amp; Unpack the NZB file set">U</option>
					<option value="3" title="Repair, Unpack, &amp; Delete the remainder of the NZB file set">D</option>
					<option value="4" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">R+</option>
					<option value="5" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">U+</option>
					<option value="6" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set" selected>D+</option>
				</select>
	
				<form action="addFile" method="post" enctype="multipart/form-data" style="display:inline">
					<input type="file" name="nzbfile" title="Enqueue nzb by File Upload" />
					<select name="pp">
						<option value="0" title="Do not post-process the NZB file set">-</option>
						<option value="1" title="Repair the NZB file set with PAR2 files">R</option>
						<option value="2" title="Repair &amp; Unpack the NZB file set">U</option>
						<option value="3" title="Repair, Unpack, &amp; Delete the remainder of the NZB file set">D</option>
						<option value="4" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">R+</option>
						<option value="5" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set">U+</option>
						<option value="6" title="(+Script) Repair, Unpack, &amp; Delete the remainder of the NZB file set" selected>D+</option>
					</select>
				</form>
		</div>
		<!-- +NZB Menu : Begin -->
		
		
		
		<!-- Queue and History Container : Begin -->
		<div class="textCenter">

		
			<!-- Queue : Begin -->
			<div id="queue"></div>
			<!-- Queue : End -->
			
			<!-- History : Begin -->
			<div id="history"></div>
			<!-- History : End -->
			
		</div>
		<!-- Queue and History Container : End -->
	
	
	
	</div>
	<!-- Container : End -->
	
</body>
</html>