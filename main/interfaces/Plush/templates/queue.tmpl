<%
def InjectProgressBarPosition (mbleft, mb):
	if mb == '0.00': # don't divide by zero
		return '-120px -1px;'
	percentage = int(100 - float(mbleft) / float(mb) * 100)
	postion =  int(120 - 120.0 / 100.0 * percentage)
	return '-'+str(postion)+'px -1px;'
%>
			<!--#set $x_kbpersec = $kbpersec #-->
			<!--#set $x_mbleft = $mbleft #-->
			<!--#set $x_mb = $mb #-->

			<div class="box_banner_hr"></div>

			<span style="display:none" id="stats_noofslots">$noofslots</span>
			
			<table class="queueTable" id="queueTable">
			<!--#set $odd = False#-->
			<!--#if $varExists('slotinfo')#-->
			<!--#for $slot in $slotinfo#-->
				<!--#set $odd = not $odd#-->
				<tr id="$slot.nzo_id"<!--#if $odd#--> class="alt"<!--#end if#-->>
				
				<td class="title" title="Average File Age: $slot.avg_age">
					<a onclick="GB_show('Files in <%= slot['filename'].replace("'","&rsquo;") %>', 'queue/$slot.nzo_id/', 1, 1);">$slot.filename</a>
				</td>
				<td class="queueProgressBarContainer">
					<div class="queueProgressBar" style="background-position: <%=InjectProgressBarPosition(slot['mbleft'],slot['mb'])%>">
						<div class="totalDownload"><%=int(float(slot['mb']))%></div>
						<div class="currentDownload"><%=int(float(slot['mbleft']))%></div>
					</div>
				</td>
				<td class="eta">$slot.eta</td>
				<td class="options">
					
					<!--#if $cat_list#-->
            		<select onchange="ChangeCategory('$slot.nzo_id', this.options[this.selectedIndex].value);">
                		<!--#for $ct in $cat_list#-->
                    		<option value="$ct" <!--#if $slot.cat.lower() == $ct.lower() then "selected" else ""#-->>$ct</option>
                		<!--#end for#-->
                	</select>
            		<!--#end if#-->
					<select class="post-proc" title="Post-Processing Options" onchange="ChangeProcessingOption('$slot.nzo_id', this.options[this.selectedIndex].value);">
						<option value="0" <!--#if $slot.unpackopts == "0" then "selected " else ""#-->title="Do not post-process the NZB file set">(Skip)</option>
						<option value="1" <!--#if $slot.unpackopts == "1" then "selected " else ""#-->title="Repair the NZB file set with PAR2 files">+Repair</option>
						<option value="2" <!--#if $slot.unpackopts == "2" then "selected " else ""#-->title="Repair &amp; Unpack the NZB file set">+Unpack</option>
						<option value="3" <!--#if $slot.unpackopts == "3" then "selected " else ""#-->title="Repair, Unpack, &amp; Delete the unneeded remainder of the NZB file set">+Delete</option>
					</select>
					<!--#if $script_list#-->
            		<select onchange="ChangeProcessingScript('$slot.nzo_id', this.options[this.selectedIndex].value);">
                		<!--#for $sc in $script_list#-->
                    		<option value="$sc"  <!--#if $slot.script == $sc then "selected" else ""#-->>$sc</option>
                		<!--#end for#-->
                	</select>
            		<!--#end if#-->
		
					<div class="queue_delete" title="Delete NZB from Queue">&nbsp;&nbsp;&nbsp;</div>
				</td>
			</tr>
	
	
			<!--#if $slot.finished or $slot.active or $slot.queued#-->
			<!-- Post Processing : Begin -->
			<tr class="postProcessing">
				<td class="first last" colspan="5">
					<table cellspacing="0">
						<tbody>
					
							<!--#if $slot.finished#-->
							<!--#for $line in $slot.finished#-->
							<tr class="finished">
								<td class="processItemStatus">Finished</td>
								<td class="processItemTitle" title="Age: $line.age">$line.filename</td>
								<td>$line.mbleft of $line.mb MB</td>
								<td></td>
							</tr>
							<!--#end for#-->
							<!--#end if#-->


							<!--#if $slot.active#-->
							<!--#for $line in $slot.active#--> 
							<tr class="active">
								<td class="processItemStatus">Active</td>
								<td class="processItemTitle" title="Age: $line.age">$line.filename</td>
								<td>$line.mbleft of $line.mb MB</td>
								<td class="processItemMove">
									<a onclick="ManipNZF('$slot.nzo_id', '$line.nzf_id', 'Top');" class="queue_top">&laquo;</a>
									<a onclick="ManipNZF('$slot.nzo_id', '$line.nzf_id', 'Up');" class="queue_up">&lsaquo;</a>
									<a onclick="ManipNZF('$slot.nzo_id', '$line.nzf_id', 'Down');" class="queue_down">&rsaquo;</a>
									<a onclick="ManipNZF('$slot.nzo_id', '$line.nzf_id', 'Bottom');" class="queue_bottom">&raquo;</a>
									<a onclick="ManipNZF('$slot.nzo_id', '$line.nzf_id', 'Drop');" class="queue_drop">&otimes;</a>
								</td>
							</tr>
							<!--#end for#-->
							<!--#end if#-->
						
						
							<!--#if $slot.queued#-->
							<!--#for $line in $slot.queued#--> 
							<tr class="pending">
								<td class="processItemStatus">Pending</td>
								<td class="processItemTitle" title="Age: $line.age -- Set: $line.set">$line.filename</td>
								<td>$line.mbleft of $line.mb MB</td>
								<td></td>
							</tr>
							<!--#end for#-->
							<!--#end if#-->	
						
						</tbody>
					</table>
				</td>
			</tr>
			<!-- Post Processing : End -->
			<!--#end if#-->
		
		<!--#end for#-->
		<!--#end if#-->
		</table>
		
		
		<div class="box_fatbottom">
			<div class="right_stats">
				<!--#if $diskspace1 == $diskspace2#-->
				<span class="floatRight"><b>$diskspace1</b><small>&nbsp;GB&nbsp;Free&nbsp;Space</small></span>
				<!--#else#-->
				<strong class="stats_incomplete_freespace">$diskspace1&nbsp;GB</strong>&nbsp;Free
				<strong class="stats_complete_freespace">$diskspace2&nbsp;GB</strong>&nbsp;Free&nbsp;Space
				<!--#end if#-->
			</div>
			<div class="left_stats">
				<strong><%=int(float(x_mbleft))%>&nbsp;of&nbsp;<%=int(float(x_mb))%>&nbsp;MB</strong>&nbsp;Remaining
			</div>
		</div>
