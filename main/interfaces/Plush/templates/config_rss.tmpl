<!--#set global $pane="RSS"#-->
<!--#set global $help_uri="Configure+RSS"#-->
<!--#include $webdir + "/config_inc_header.tmpl"#-->

            <div class="EntryBlock">
            <form action="add_rss_feed" method="post">
            <fieldset class="EntryFieldSet" style="white-space: nowrap">
            <legend id="configbox_new_feed_url">New&nbsp;Feed&nbsp;URL</legend>
                <input type="text" size="10" name="feed" value="$feed"/>
                <input type="text" size="104" name="uri"/>
                <input type="submit" value="Add"/>
            </fieldset>
            </form>
            </div>

            <!--#for $feed in $rss#-->
                <div class="EntryBlock">
                <form action="upd_rss_feed" method="post">
                <fieldset class="EntryFieldSet">

                    <legend style="padding-left:4px; color:white; background-color:<!--#if $rss[$feed]['enable'] then 'darkgreen' else 'darkred'#-->"><input type="checkbox" name="enable" <!--#if $rss[$feed]['enable'] then "CHECKED" else "" #-->/>&nbsp;$feed</legend>

                    <input type="text" size="120" name="uri" value="$rss[$feed]['uri']"/><br/><br/>
		
		            <input type="button" class="preview_feed" value="Preview"/>
		            <input type="button" class="download_feed" value="Force Download"/>
					&nbsp;&nbsp;&nbsp;&nbsp;
		            <select name="priority"><optgroup label="Priority">
		                <option value="2" <!--#if $rss[$feed]['priority'] == 2 then 'selected' else ''#-->>Force</option>
		                <option value="1" <!--#if $rss[$feed]['priority'] == 1 then 'selected' else ''#-->>High</option>
		                <option value="0" <!--#if $rss[$feed]['priority'] == 0 then 'selected' else ''#-->>Normal</option>
		                <option value="-1" <!--#if $rss[$feed]['priority'] == -1 then 'selected' else ''#-->>Low</option>
		            </optgroup></select>
		            <!--#if $rss[$feed]['pick_cat']#-->
	                <select name="cat"><optgroup label="Category">
	                <!--#for $ct in $cat_list#-->
	                    <option value="$ct" <!--#if $ct == $rss[$feed]['cat'] then "selected" else ""#-->>$ct</option>
	                <!--#end for#-->
	                </optgroup></select>
		            <!--#end if#-->
		            <select name="pp"><optgroup label="Processing">
		                <option value="" <!--#if $rss[$feed]['pp'] == "" then 'selected' else ''#-->>Default</option>
		                <option value="0" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>(Skip)</option>
		                <option value="1" <!--#if $rss[$feed]['pp'] == "1" then 'selected' else ''#-->>+Repair</option>
		                <option value="2" <!--#if $rss[$feed]['pp'] == "2" then 'selected' else ''#-->>+R+Unpack</option>
		                <option value="3" <!--#if $rss[$feed]['pp'] == "3" then 'selected' else ''#-->>+R+U+Delete</option>
		            </optgroup></select>
		            <!--#if $rss[$feed]['pick_script']#-->
	                <select name="script"><optgroup label="Script">
	                <!--#for $sc in $script_list#-->
	                    <option value="$sc" <!--#if $sc == $rss[$feed]['script'] then "selected" else ""#-->>$sc</option>
	                <!--#end for#-->
	                </optgroup></select>
		            <!--#end if#-->

                    <input type="hidden" name="feed" value="$feed"/>
		            <input type="submit" value="Save"/>
					<input type="button" value="X" class="delete_feed"/>

                </form>

                <hr/>

                <table style="clear:both;">
                    <tr>
                        <th>Order</th>
                        <th>Type</th>
                        <th>Filter</th>
                        <!--#if $rss[$feed]['pick_cat'] then "<th>Category</th>" else ""#-->
                        <th>Processing</th>
                        <!--#if $rss[$feed]['pick_script'] then "<th>Script</th>" else ""#-->
                        <th></th>
                    </tr>

                    <form action="upd_rss_filter" method="get">
                    <tr class="odd">

                        <td></td>

                        <td>
                            <select name="filter_type">
                                <option value="A" selected /> Accept</option>
                                <option value="R" /> Reject</option>
                            </select>
                        </td>
                        <td><input type="text" size="60" name="filter_text" value=""></td>

                        <!--#if $rss[$feed]['pick_cat']#-->
                        <td>
                        <select name="cat">
                        <!--#for $ct in $cat_list#-->
                        <option value="$ct" <!--#if $ct == $rss[$feed]['cat'] then "selected" else ""#-->>$ct</option>
                        <!--#end for#-->
                        </select>
                        </td>
                        <!--#end if#-->

                        <td>
                            <select name="pp">
                                <option value="" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>Default</option>
                                <option value="0" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>(Skip)</option>
                                <option value="1" <!--#if $rss[$feed]['pp'] == "1" then 'selected' else ''#-->>+Repair</option>
                                <option value="2" <!--#if $rss[$feed]['pp'] == "2" then 'selected' else ''#-->>+R+Unpack</option>
                                <option value="3" <!--#if $rss[$feed]['pp'] == "3" then 'selected' else ''#-->>+R+U+Delete</option>
                            </select>
                        </td>

                        <!--#if $rss[$feed]['pick_script']#-->
                        <td>
                            <select name="script">
                            <!--#for $sc in $script_list#-->
                                <option value="$sc" <!--#if $sc == $rss[$feed]['script'] then "selected" else ""#-->>$sc</option>
                            <!--#end for#-->
                            </select>
                        </td>
                        <!--#end if#-->


                        <td colspan="2">
                            <input type="hidden" value="$rss[$feed]['filtercount']" name="index"/>
                            <input type="hidden" value="$feed" name="feed"/>
                            <input type="submit" value="Add"/>
                        </td>

                    </tr>
                    </form>

                    <!--#set $fnum = 0#-->
                    <!--#for $filter in $rss[$feed].filters#-->
                    <tr class="odd">

                        <td><form>
                            <select class="filter_order">
                            <!--#for $i in xrange($rss[$feed]['filtercount'])#-->
                                <option value="pos_rss_filter?feed=$feed&current=$fnum&new=$i" <!--#if int($i) == int($fnum) then "selected" else ""#-->>$i</option>
                            <!--#end for#-->
                            </select>
                            <input type="hidden" value="$feed" name="feed"/>
                        </form></td>

                        <form action="upd_rss_filter" method="get">
                        <td>
                            <select name="filter_type">
                                <option value="A" <!--#if $filter[3] == "A" then "selected" else ""#--> /> Accept</option>
                                <option value="R" <!--#if $filter[3] == "R" then "selected" else ""#--> /> Reject</option>
                            </select>
                        </td>

                        <td><input type="text" size="60" name="filter_text" value="$filter[4]"/></td>

                        <!--#if $rss[$feed]['pick_cat']#-->
                        <td>
                            <select name="cat">
                            <!--#for $ct in $cat_list#-->
                                <option value="$ct" <!--#if $ct == $filter[0] then "selected" else ""#-->>$ct</option>
                            <!--#end for#-->
                            </select>
                        </td>
                        <!--#end if#-->

                        <td>
                            <select name="pp">
                                <option value="" <!--#if $filter[1] == "0" then 'selected' else ''#-->>Default</option>
                                <option value="0" <!--#if $filter[1] == "0" then 'selected' else ''#-->>(Skip)</option>
                                <option value="1" <!--#if $filter[1] == "1" then 'selected' else ''#-->>+Repair</option>
                                <option value="2" <!--#if $filter[1] == "2" then 'selected' else ''#-->>+R+Unpack</option>
                                <option value="3" <!--#if $filter[1] == "3" then 'selected' else ''#-->>+R+U+Delete</option>
                            </select>
                        </td>

                        <!--#if $rss[$feed]['pick_script']#-->
                        <td>
                            <select name="script">
                            <!--#for $sc in $script_list#-->
                                <option value="$sc" <!--#if $sc == $filter[2] then "selected" else ""#-->>$sc</option>
                            <!--#end for#-->
                            </select>
                        </td>
                        <!--#end if#-->

                        <td>
                            <input type="hidden" name="index" value="$fnum"/>
                            <input type="hidden" name="feed" value="$feed"/>
                            <input type="submit" value="Save"/>
							</form>
                        </td>
                        
                        <td>
                            <form action="del_rss_filter" method="post">
                                <input type="hidden" value="$fnum" name="index"/>
                                <input type="hidden" value="$feed" name="feed"/>
                                <input type="submit" value="X"/>
                            </form>
						</td>
						
                    </tr>
                    <!--#set $fnum = $fnum+1#-->
                    <!--#end for#-->

                </table>

                </fieldset>
                </div>

            <!--#end for#-->

<!--#include $webdir + "/config_inc_footer.tmpl"#-->
