<!--#set global $pane="RSS"#-->
<!--#set global $help_uri="Configure+RSS"#-->
<!--#include $webdir + "/config_inc_header.tmpl"#-->

<form action="add_rss_feed" method="post">
<input type="hidden" name="session" value="$session">

<div class="EntryBlock">
<fieldset class="EntryFieldSet" style="white-space: nowrap">
<legend><span class="sprite_container sprite_config_rss_add">&nbsp;</span> $T('newFeedURI')</legend>
    <input type="text" size="10" name="feed" value="$feed"/>
    <input type="text" size="104" name="uri"/>
    <input type="submit" value="$T('button-add')"/>
</fieldset>
</form>
</div>

<br class="clear"/>
<small><p>$T('explain-RSS')</p></small>

<!--#for $feed in $rss#-->
    <form action="upd_rss_feed" method="post">
	<input type="hidden" name="session" value="$session">

    <div class="EntryBlock">
    <fieldset class="EntryFieldSet">

        <legend style="padding-left:4px; color:white; background-color:<!--#if $rss[$feed]['enable'] then 'darkgreen' else 'darkred'#-->"><input type="checkbox" name="enable" <!--#if $rss[$feed]['enable'] then "CHECKED" else "" #-->/>&nbsp;$feed</legend>

        <input type="text" size="120" name="uri" value="$rss[$feed]['uri']"/><br/><br/>

        <input type="button" class="preview_feed" value="$T('button-preFeed')" rel="preview"/>
        <input type="button" class="download_feed" value="$T('button-forceFeed')" rel="$T('Plush-confirm') "/>
		&nbsp;&nbsp;&nbsp;&nbsp;

        <select name="priority"><optgroup label="$T('priority')">
            <option value="-100" <!--#if $rss[$feed]['priority'] == -100 then 'selected' else ''#-->>$T('default')</option>
            <option value="2" <!--#if $rss[$feed]['priority'] == 2 then 'selected' else ''#-->>$T('pr-force')</option>
            <option value="1" <!--#if $rss[$feed]['priority'] == 1 then 'selected' else ''#-->>$T('pr-high')</option>
            <option value="0" <!--#if $rss[$feed]['priority'] == 0 then 'selected' else ''#-->>$T('pr-normal')</option>
            <option value="-1" <!--#if $rss[$feed]['priority'] == -1 then 'selected' else ''#-->>$T('pr-low')</option>
        </optgroup></select>
        <!--#if $rss[$feed]['pick_cat']#-->
        <select name="cat"><optgroup label="$T('category')">
        <!--#for $ct in $cat_list#-->
            <option value="$ct" <!--#if $ct == $rss[$feed]['cat'] then "selected" else ""#-->>$Tspec($ct)</option>
        <!--#end for#-->
        </optgroup></select>
        <!--#end if#-->
        <select name="pp"><optgroup label="$T('pp')">
            <option value="" <!--#if $rss[$feed]['pp'] == "" then 'selected' else ''#-->>$T('default')</option>
            <option value="0" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>$T('pp-none')</option>
            <option value="1" <!--#if $rss[$feed]['pp'] == "1" then 'selected' else ''#-->>$T('pp-repair')</option>
            <option value="2" <!--#if $rss[$feed]['pp'] == "2" then 'selected' else ''#-->>$T('pp-unpack')</option>
            <option value="3" <!--#if $rss[$feed]['pp'] == "3" then 'selected' else ''#-->>$T('pp-delete')</option>
        </optgroup></select>
        <!--#if $rss[$feed]['pick_script']#-->
        <select name="script"><optgroup label="$T('script')">
        <!--#for $sc in $script_list#-->
            <option value="$sc" <!--#if $sc == $rss[$feed]['script'] then "selected" else ""#-->>$Tspec($sc)</option>
        <!--#end for#-->
        </optgroup></select>
        <!--#end if#-->

		&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="hidden" name="feed" value="$feed"/>
        <input type="submit" value="$T('button-save')"/>
		<input type="button" value="$T('button-delFeed')" class="delete_feed" rel="$T('Plush-confirm') "/>

    </form>

    <hr/>

    <table style="clear:both;">
        <tr>
            <th>$T('rss-order')</th>
            <th>$T('rss-type')</th>
            <th>$T('rss-filter')</th>
            <!--#if $rss[$feed]['pick_cat'] then "<th>"+$T('category')+"</th>" else ""#-->
            <th>$T('pp')</th>
            <!--#if $rss[$feed]['pick_script'] then "<th>"+$T('script')+"</th>" else ""#-->
            <th></th>
        </tr>

        <form action="upd_rss_filter" method="get">
		<input type="hidden" name="session" value="$session">

        <tr class="odd">

            <td></td>

            <td>
                <select name="filter_type">
                    <option value="A" selected /> $T('rss-accept')</option>
                    <option value="R" /> $T('rss-reject')</option>
                </select>
            </td>
            <td><input type="text" size="60" name="filter_text" value=""></td>

            <!--#if $rss[$feed]['pick_cat']#-->
            <td>
            <select name="cat">
            <!--#for $ct in $cat_list#-->
            <option value="$ct" <!--#if $ct == $rss[$feed]['cat'] then "selected" else ""#-->>$Tspec($ct)</option>
            <!--#end for#-->
            </select>
            </td>
            <!--#end if#-->

            <td>
                <select name="pp">
                    <option value="" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>$T('default')</option>
                    <option value="0" <!--#if $rss[$feed]['pp'] == "0" then 'selected' else ''#-->>$T('pp-none')</option>
                    <option value="1" <!--#if $rss[$feed]['pp'] == "1" then 'selected' else ''#-->>$T('pp-repair')</option>
                    <option value="2" <!--#if $rss[$feed]['pp'] == "2" then 'selected' else ''#-->>$T('pp-unpack')</option>
                    <option value="3" <!--#if $rss[$feed]['pp'] == "3" then 'selected' else ''#-->>$T('pp-delete')</option>
                </select>
            </td>

            <!--#if $rss[$feed]['pick_script']#-->
            <td>
                <select name="script">
                <!--#for $sc in $script_list#-->
                    <option value="$sc" <!--#if $sc == $rss[$feed]['script'] then "selected" else ""#-->>$Tspec($sc)</option>
                <!--#end for#-->
                </select>
            </td>
            <!--#end if#-->


            <td colspan="2">
                <input type="hidden" value="$rss[$feed]['filtercount']" name="index"/>
                <input type="hidden" value="$feed" name="feed"/>
                <input type="submit" value="$T('button-add')"/>
            </td>

        </tr>
        </form>

        <!--#set $fnum = 0#-->
        <!--#for $filter in $rss[$feed].filters#-->
        <tr class="odd">

            <td><form>
				<input type="hidden" name="session" value="$session">
                <select class="filter_order">
                <!--#for $i in xrange($rss[$feed]['filtercount'])#-->
                    <option value="pos_rss_filter?feed=$feed&current=$fnum&new=$i" <!--#if int($i) == int($fnum) then "selected" else ""#-->>$i</option>
                <!--#end for#-->
                </select>
                <input type="hidden" value="$feed" name="feed"/>
            </form></td>

            <form action="upd_rss_filter" method="get">
			<input type="hidden" name="session" value="$session">

            <td>
                <select name="filter_type">
                    <option value="A" <!--#if $filter[3] == "A" then "selected" else ""#--> /> $T('rss-accept')</option>
                    <option value="R" <!--#if $filter[3] == "R" then "selected" else ""#--> /> $T('rss-reject')</option>
                </select>
            </td>

            <td><input type="text" size="60" name="filter_text" value="$filter[4]"/></td>

            <!--#if $rss[$feed]['pick_cat']#-->
            <td>
                <select name="cat">
                <!--#for $ct in $cat_list#-->
                    <option value="$ct" <!--#if $ct == $filter[0] then "selected" else ""#-->>$Tspec($ct)</option>
                <!--#end for#-->
                </select>
            </td>
            <!--#end if#-->

            <td>
                <select name="pp">
                    <option value="" <!--#if $filter[1] == "0" then 'selected' else ''#-->>$T('default')</option>
                    <option value="0" <!--#if $filter[1] == "0" then 'selected' else ''#-->>$T('pp-none')</option>
                    <option value="1" <!--#if $filter[1] == "1" then 'selected' else ''#-->>$T('pp-repair')</option>
                    <option value="2" <!--#if $filter[1] == "2" then 'selected' else ''#-->>$T('pp-unpack')</option>
                    <option value="3" <!--#if $filter[1] == "3" then 'selected' else ''#-->>$T('pp-delete')</option>
                </select>
            </td>

            <!--#if $rss[$feed]['pick_script']#-->
            <td>
                <select name="script">
                <!--#for $sc in $script_list#-->
                    <option value="$sc" <!--#if $sc == $filter[2] then "selected" else ""#-->>$Tspec($sc)</option>
                <!--#end for#-->
                </select>
            </td>
            <!--#end if#-->

            <td>
                <input type="hidden" name="index" value="$fnum"/>
                <input type="hidden" name="feed" value="$feed"/>
                <input type="submit" value="$T('button-save')"/>
				</form>
            </td>

            <td>
                <form action="del_rss_filter" method="post">
					<input type="hidden" name="session" value="$session">
                    <input type="hidden" value="$fnum" name="index"/>
                    <input type="hidden" value="$feed" name="feed"/>
                    <input type="submit" value="$T('rss-delFilter')"/>
                </form>
			</td>

        </tr>
        <!--#set $fnum = $fnum+1#-->
        <!--#end for#-->

    </table>

    </fieldset>
    </div>

<!--#end for#-->

<!--#include $webdir + "/config_inc_footer.tmpl"#-->
