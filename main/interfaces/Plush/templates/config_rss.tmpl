<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
    <title>SABnzbd+ $version - Queued: $mbleft MB</title>
	<script type="text/javascript" src="../../static/javascripts/jquery.pack.js"></script>
	<script type="text/javascript" src="../../static/javascripts/jquery.corner.js"></script>
	<link rel="stylesheet" type="text/css" href="../../static/stylesheets/plush-default.css" media="screen"/>
</head>

<style>
<!--
	body {background: #ddd;}
-->
</style>

<body>

<div id="config_nav">
	<ul>
		<li><a class="config_menu" href="../../connections"><img src="../../static/images/plush_default_config/config_connections.png" />Connections</a></li>
		<li><a class="config_menu" href="../general"><img src="../../static/images/plush_default_config/config_general.png" />General</a></li>
		<li><a class="config_menu" href="../directories"><img src="../../static/images/plush_default_config/config_directories.png" />Directories</a></li>
		<li><a class="config_menu" href="../switches"><img src="../../static/images/plush_default_config/config_switches.png" />Switches</a></li>
		<li><a class="config_menu" href="../server"><img src="../../static/images/plush_default_config/config_servers.png" />Servers</a></li>
     	<li><a class="config_menu" href="../categories"><img src="../../static/images/plush_default_config/config_categories.png" />Categories</a></li>
		<li><a class="config_menu" href="../scheduling"><img src="../../static/images/plush_default_config/config_scheduling.png" />Scheduling</a></li>
		<li><a class="config_menu" id="nav_active" href="../rss"><img src="../../static/images/plush_default_config/config_rss.png" />RSS</a></li>
		<li><a class="config_menu" href="../email"><img src="../../static/images/plush_default_config/config_email.png" />Email</a></li>
     	<li><a class="config_menu" href="../newzbin"><img src="../../static/images/plush_default_config/config_newzbin.png" />Newzbin</a></li>
	</ul>
</div>

<div id="config_container" class="config_margin">
	<div id="config_content">

<!-- ************************************
	 		PAGE CONTENT IS BELOW
     ************************************ -->
<!--#if $have_feedparser#-->

<div class="EntryBlock">
<form action="add_rss_feed" method="post">
<fieldset class="EntryFieldSet">
<legend>New feed URI</legend>
    <input type="text" size="75" name="uri" value=""/><br/><br/>
    <input type="submit" value="Save"/>
</fieldset>
</form>
</div>

<!--#for $uri in $rss#-->
    <h3>Feed Definition</h3>
    <div class="EntryBlock">
    <form action="upd_rss_feed" method="post">
        <fieldset class="EntryFieldSet">
            <legend>Feed URI</legend>

            <input type="text" size="120" name="uri" value="$uri"/><br/><br/>

            <!--#if $rss[$uri]['pick_cat']#-->
                <select name="cat">
                <!--#for $ct in $cat_list#-->
                    <option value="$ct" <!--#if $ct == $rss[$uri]['cat'] then "selected" else ""#-->>$ct</option>
                <!--#end for#-->
                </select>
            <!--#end if#-->
            <!--#if $rss[$uri]['pick_pp']#-->
                <select name="pp">
                    <option value="0" <!--#if $rss[$uri]['pp'] == "0" then 'selected' else ''#-->>None</option>
                    <option value="1" <!--#if $rss[$uri]['pp'] == "1" then 'selected' else ''#-->>+Repair</option>
                    <option value="2" <!--#if $rss[$uri]['pp'] == "2" then 'selected' else ''#-->>+Unpack</option>
                    <option value="3" <!--#if $rss[$uri]['pp'] == "3" then 'selected' else ''#-->>+Delete</option>
                </select>
            <!--#end if#-->

            <input type="hidden" name="this_uri" value="$uri">
            <input type="submit" value="Save"/>
            <input type="submit" onclick="this.form.action='del_rss_feed';  this.form.submit(); return false;" value="Delete"/>
            <input type="submit" onclick="this.form.action='query_rss_feed'; this.form.submit(); return false;" value="Query"/>
            <input type="submit" onclick="this.form.action='rematch_rss_feed'; this.form.submit(); return false;" value="Rematch/Show"/>
            <!--#if $rss[$uri]['enable']#-->
                <input type="submit" onclick="this.form.action='disable_rss_feed'; this.form.submit(); return false;" value="Stop"/>
            <!--#else#-->
                <input type="submit" onclick="this.form.action='enable_rss_feed'; this.form.submit(); return false;" value="Start/Download"/>
            <!--#end if#-->
        </fieldset>
    </form>
    </div>
    <br/>

    <table>
        <tr>
            <th></th>
            <th>Order</th>
            <th>Type</th>
            <th>Filter</th>
            <!--#if $rss[$uri]['pick_cat'] then "<th>Category</th>" else ""#-->
            <!--#if $rss[$uri]['pick_pp'] then "<th>Mode</th>" else ""#-->
            <th></th>
        </tr>

        <form action="upd_rss_filter" method="get">
        <tr class="odd">
        <td></td>
        <td></td>
        <td>
            <select name="filter_type">
                <option value="A" selected /> Accept</option>
                <option value="R" /> Reject</option>
            </select>
        </td>
        <td><input type="text" size="60" name="filter_text" value=""></td>
        <!--#if $rss[$uri]['pick_cat']#-->
          <td>
            <select name="cat">
            <!--#for $ct in $cat_list#-->
                <option value="$ct" <!--#if $ct == $rss[$uri]['cat'] then "selected" else ""#-->>$ct</option>
            <!--#end for#-->
            </select>
          </td>
        <!--#end if#-->
        <!--#if $rss[$uri]['pick_pp']#-->
          <td>
            <select name="pp">
                <option value="0" <!--#if $rss[$uri]['pp'] == "0" then 'selected' else ''#-->>None</option>
                <option value="1" <!--#if $rss[$uri]['pp'] == "1" then 'selected' else ''#-->>+Repair</option>
                <option value="2" <!--#if $rss[$uri]['pp'] == "2" then 'selected' else ''#-->>+Unpack</option>
                <option value="3" <!--#if $rss[$uri]['pp'] == "3" then 'selected' else ''#-->>+Delete</option>
            </select>
          </td>
        <!--#end if#-->
        <input type="hidden" value="$rss[$uri]['filtercount']" name="index">
        <input type="hidden" value="$uri" name="uri">
        <td><input type="submit" value="Save"></td>
        </tr>
        </form>

    <!--#for $filter in $rss[$uri].filters#-->
        <tr class="odd">
        <td>
            <form action="del_rss_filter" method="post">
            <input type="hidden" value="$filter[3]" name="index">
            <input type="hidden" value="$uri" name="uri">
            <input type="submit" value="X"></form>
        </td>

        <td><form><select onchange="location = this.options[this.selectedIndex].value;">
        <!--#for $i in xrange($rss[$uri]['filtercount'])#-->
            <option value="pos_rss_filter?uri=$uri&current=$filter[3]&new=$i" <!--#if $i == $filter[3] then "selected" else ""#-->>$i</option>
        <!--#end for#-->
        </select>
        <input type="hidden" value="$uri" name="uri">
        </form></td>

        <form action="upd_rss_filter" method="get">
        <td>
        <select name="filter_type">
            <option value="A" <!--#if $filter[1] == "A" then "selected" else ""#--> /> Accept</option>
            <option value="R" <!--#if $filter[1] == "R" then "selected" else ""#--> /> Reject</option>
        </select>
        </td>

        <td><input type="text" size="60" name="filter_text" value="$filter[2]"/></td>
        <!--#if $rss[$uri]['pick_cat']#-->
          <td>
            <select name="cat">
            <!--#for $ct in $cat_list#-->
                <option value="$ct" <!--#if $ct == $filter[0] then "selected" else ""#-->>$ct</option>
            <!--#end for#-->
            </select>
          </td>
        <!--#end if#-->
        <!--#if $rss[$uri]['pick_pp']#-->
          <td>
            <select name="pp">
                <option value="0" <!--#if $filter[0] == "0" then 'selected' else ''#-->>None</option>
                <option value="1" <!--#if $filter[0] == "1" then 'selected' else ''#-->>+Repair</option>
                <option value="2" <!--#if $filter[0] == "2" then 'selected' else ''#-->>+Unpack</option>
                <option value="3" <!--#if $filter[0] == "3" then 'selected' else ''#-->>+Delete</option>
            </select>
          </td>
        <!--#end if#-->
        <td>
        <input type="hidden" name="index" value="$filter[3]"/>
        <input type="hidden" name="uri" value="$uri"/>
        <input type="submit" value="Save"/>
        </td>
        </form>
        </tr>
    <!--#end for#-->

    </table>
<!--#end for#-->

<!--#else#-->
    <p>
        <b>feedparser module missing<b>
    </p>
<!--#end if#-->

<!-- ************************************
	 		PAGE CONTENT IS ABOVE
     ************************************ -->
	</div>
</div>

<div class="left_links config_margin">
	<a id="help" target="_blank" href="$helpuri/Configure+RSS"><img src="../../static/images/plush_default_config/config_help.png"> Contextual Help</a>
</div>

<script language="javascript">
	\$('.config_menu').corner("round tl bl");
	\$('#config_container').corner("round");
	\$('#help').corner("round");

</script>

</body>
</html>