<!--#set global $pane="Sorting"#-->
<!--#set global $help_uri="Configure+Sorting"#-->
<!--#include $webdir + "/config_inc_header.tmpl"#-->

    <script language="javascript">        
    // switch's sort code
    function tvAdd(val){
        var tv = document.getElementById('tvfoldername'); 
        tv.value = tv.value + val;
        previewtv();
    }
    function tvSet(val){
        var tv = document.getElementById('tvfoldername'); 
        tv.value = val;
        previewtv();
    }
    function tvClear(){
        var tv = document.getElementById('tvfoldername'); 
        tv.value = '';
        previewtv();
    }
    function previewtv(){
        var input = document.getElementById('tvfoldername').value;
        var slash = "\\";
        input.toLowerCase()
        input = input.replace(/%ext/g,'avi');
        input = input.replace(/%sn/g,'Show Name');
        input = input.replace(/%s.n/g,'Show.Name');
        input = input.replace(/%s_n/g,'Show_Name');
        input = input.replace(/%0s/g,'01');
        input = input.replace(/%s/g,'1');
        input = input.replace(/%en/g,'Episode Name');
        input = input.replace(/%e\.n/g,'Episode.Name');
        input = input.replace(/%e\_n/g,'Episode_Name');
        input = input.replace(/%0e/g,'05');
        input = input.replace(/%e/g,'5');
        var com = document.getElementById('complete_dir').value;
        if (com.search("/") > 0)
        {
            slash = "/";
            input = input.replace("\\","/", "g");
        } else {
            input = input.replace("/","\\", "g");
        }
        len = com.length
        if (com.substring(len-1, len) == slash)
        {
            com = com.substring(0, len-1)
        }
        var outbox = document.getElementById('previewtv').innerHTML = com+slash+input;
    }
    
    function movieAdd(val){
        var tv = document.getElementById('moviefoldername'); 
        tv.value = tv.value + val;
        previewmovie();
    }
    function movieSet(val, val2){
        var tv = document.getElementById('moviefoldername'); 
        tv.value = val;
        var tv2 = document.getElementById('movieextra'); 
        tv2.value = val2;
        previewmovie();
    }
    function movieClear(){
        var tv = document.getElementById('moviefoldername'); 
        tv.value = '';
        previewmovie();
    }
    function movieClearExtra(){
        var tv = document.getElementById('movieextra'); 
        tv.value = '';
        previewmovie();
    }
    function movieExtraFolder(value)
    {
       document.getElementById('movie_extra_folder').checked = value;
    }
    function previewmovie()
    {
        var input = document.getElementById('moviefoldername').value;
        var input2 = document.getElementById('movieextra').value;
        extra = input2.replace(/%1/g,'1');
        var slash = "\\";
        ext = extra + '.avi'
        input = input.replace(/.%ext/g,ext);
        input = input.replace(/%ext/g,'avi');
        input = input.replace(/%title/g,'Movie Name');
        input = input.replace(/%.title/g,'Movie.Name');
        input = input.replace(/%_title/g,'Movie_Name');
        input = input.replace(/%y/g,'2000');
        input = input.replace(/%decade/g,'00');
        
        var regex = /\{([^\{]*)\}/g;
        var str = input;
        var result;
        while ((result = regex.exec(str)) != null)
        {
          var lower = result[0].toLowerCase();
          input = input.replace(result[0],lower);
        }
        input = input.replace(/{/g,'');
        input = input.replace(/}/g,'');
        var com = document.getElementById('complete_dir').value;
        if (com.search("/") > 0)
        {
            slash = "/";
            input = input.replace("\\","/", "g");
        } else {
            input = input.replace("/","\\", "g");
        }
        len = com.length
        if (com.substring(len-1, len) == slash)
        {
            com = com.substring(0, len-1)
        }
        var outbox = document.getElementById('previewmovie').innerHTML = com+slash+input;
    }
    function dateSet(val){
        var tv = document.getElementById('datefoldername'); 
        tv.value = val;
        previewdate();
    }
    function dateClear(){
        var tv = document.getElementById('datefoldername'); 
        tv.value = '';
        previewdate();
    }
    function previewdate(){
        var input = document.getElementById('datefoldername').value;
        var slash = "\\";
        input.toLowerCase()
        input = input.replace(/%ext/g,'avi');
        input = input.replace(/%t/g,'Show Name');
        input = input.replace(/%.t/g,'Show.Name');
        input = input.replace(/%_t/g,'Show_Name');
        input = input.replace(/%decade/g,'00');
        input = input.replace(/%desc/g,'Episode Name');
        input = input.replace(/%\.desc/g,'Episode.Name');
        input = input.replace(/%\_desc/g,'Episode_Name');
        input = input.replace(/%0d/g,'02');
        input = input.replace(/%d/g,'2');
        input = input.replace(/%0m/g,'01');
        input = input.replace(/%m/g,'1');
        input = input.replace(/%y/g,'2009');
        var com = document.getElementById('complete_dir').value;
        if (com.search("/") > 0)
        {
            slash = "/";
            input = input.replace("\\","/", "g");
        } else {
            input = input.replace("/","\\", "g");
        }
        len = com.length
        if (com.substring(len-1, len) == slash)
        {
            com = com.substring(0, len-1)
        }
        var outbox = document.getElementById('previewdate').innerHTML = com+slash+input;
    }
    function showDiv(id)
    {
        disp = (document.getElementById(id).style.display == "block") ? "none" : "block";
        document.getElementById(id).style.display = disp;
    }
    </script>

            <form action="saveSorting" method="post" name="fullform">

				<div class="EntryBlock">
				
				<fieldset class="EntryFieldSet">
				<legend class="configbox_sorting_folders">Series Sorting</legend>
				
				    <input id="complete_dir" type="hidden" value="$complete_dir" />
				    <input class="radio" type="checkbox" name="enable_tv_sorting" value="1" <!--#if $enable_tv_sorting > 0 then "checked=1" else ""#--> /> <strong>Enable sorting and renaming of episodes</strong>
				    <br class="clear" /><br/>
				    <a onclick="jQuery('#Keytable1').toggle()" style="cursor:pointer; color:white; background-color:black;"><i>&nbsp;Toggle Key&nbsp;</i></a>
				     <div id="Keytable1" style="display:none">
						<table>
						<thead><tr>
			                <th align=right><small><u>Meaning</u></small></th>
			                <th><small><u>Pattern</u></small></th>
			                <th><small><u>Result</u></small></th>
				        </tr></thead>
				        <tr>
				            <td align=right><strong>Show Name:</strong></td>
				            <td>%sn</td>
				            <td>Show Name</td>
				        </tr><tr>
							<td></td>
				            <td>%s.n</td>
				            <td>Show.Name</td>
				        </tr><tr>
							<td></td>
				            <td>%s_n</td>
				            <td>Show_Name</td>
				        </tr><tr>
				            <td align=right><strong>Season Number:</strong></td>
				            <td>%s</td>
				            <td>1</td>
				        </tr><tr>
							<td></td>
				            <td>%0s</td>
				            <td>01</td>
				        </tr><tr>
				            <td align=right><strong>Episode Number:</strong></td>
				            <td>%e</td>
				            <td>5</td>
				        </tr><tr>
							<td></td>
				            <td>%0e</td>
				            <td>05</td>
				        </tr><tr>
				            <td align=right><strong>Episode Name:</strong></td>
				            <td>%en</td>
				            <td>Episode Name</td>
				        </tr><tr>
							<td></td>
				            <td>%e.n</td>
				            <td>Episode.Name</td>
				        </tr><tr>
							<td></td>
				            <td>%e_n</td>
				            <td>Episode_Name</td>
				        </tr><tr>
				            <td align=right><strong>File Extension:</strong></td>
				            <td>%ext</td>
				            <td>avi</td>
				        </tr><tr>
				            <td align=right><strong>Lower Case:</strong></td>
				            <td>{TEXT}</td>
				            <td>text</td>
				        </tr>
				        </table>
				        <!--
				        <span class="">Original Filename</span>
				        <span class="">%fn</span>
				        <span class="">Episode Name</span>
				        <br />-->
				    </div><br class="clear" /><br class="clear" />
				    <strong>Sort String:</strong>
				    <input type="text" style="width:400px" size="80" id="tvfoldername" name="tv_sort_string" value="$tv_sort_string" onkeyup="javascript:previewtv()"><input type="button" onclick="tvClear()" value="Clear"/><br class="clear" />
				    <strong>Presets:</strong>
				    <input type="button" onclick="tvSet('%sn/Season %s/%sn - %sx%0e - %en.%ext')" value="1x05 Season Folder"/>
				    <input type="button" onclick="tvSet('%sn/Season %s/%sn - S%0sE%0e - %en.%ext')" value="S01E05 Season Folder"/>
				    <input type="button" onclick="tvSet('%sn/%sx%0e - %en/%sn - %sx%0e - %en.%ext')" value="1x05 Episode Folder"/>
				    <input type="button" onclick="tvSet('%sn/S%0sE%0e - %en/%sn - S%0sE%0e - %en.%ext')" value="S01E05 Episode Folder"/><br class="clear" />
				    <br/>
				    <strong>Example:</strong> <span id="previewtv"></span>
				</fieldset>
				
				<br class="clear" />
				<fieldset class="EntryFieldSet">
				<legend class="configbox_sorting_folders">Generic Sorting</legend>
				
				    <input class="radio" type="checkbox" name="enable_movie_sorting" value="1" <!--#if $enable_movie_sorting > 0 then "checked=1" else ""#--> /> <strong>Enable generic sorting and renaming of files</strong>
				    <br class="clear" />
				    <input class="radio" type="checkbox" name="movie_extra_folder" id="movie_extra_folder" value="1" <!--#if $movie_extra_folder > 0 then "checked=1" else ""#--> /> <strong>Enable if downloads are not put in their own folders</strong>
				    <br class="clear" />
				    <label><span class="label">Affected Categories:</span>
				    <select name="movie_cat" multiple="multiple" size=4 class="multiple_cats">
				        <!--#for $ct in $cat_list#-->
				            <!--#if $ct != 'Default'#-->
				                <option value="$ct" <!--#if $ct in $movie_categories then 'selected' else ''#--> >$ct</option>
				            <!--#end if#-->
				        <!--#end for#-->
				    </select>
				    <br class="clear" /><br/>
				    <a onclick="jQuery('#Keytable2').toggle()" style="cursor:pointer; color:white; background-color:black;"><i>&nbsp;Toggle Key&nbsp;</i></a>
				     <div id="Keytable2" style="display:none">
				        <table>
				        <thead><tr>
				           <th align=right><small><u>Meaning</u></small></th>
				           <th><small><u>Pattern</u></small></th>
				           <th><small><u>Result</u></small></th>
				        </tr></thead>
				        <tr>
				            <td align=right><strong>Title:</strong></td>
				            <td>%title</td>
				            <td>Movie Name</td>
				        </tr><tr>
							<td></td>
				            <td>%.title</td>
				            <td>Movie.Name</td>
				        </tr><tr>
							<td></td>
				            <td>%_title</td>
				            <td>Movie_Name</td>
				        </tr><tr>
				            <td align=right><strong>Year:</strong></td>
				            <td>%y</td>
				            <td>2000</td>
				        </tr><tr>
				            <td align=right><strong>Extension:</strong></td>
				            <td>%ext</td>
				            <td>avi</td>
				        </tr><tr>
				            <td align=right><strong>Part Number:</strong></td>
				            <td>%1</td>
				            <td>1</td>
				        </tr><tr>
				            <td align=right><strong>Decade:</strong></td>
				            <td>%decade</td>
				            <td>00</td>
				        </tr><tr>
				            <td align=right><strong>Lower Case:</strong></td>
				            <td>{TEXT}</td>
				            <td>text</td>
				        </tr>
				        </table>
				    </div><br class="clear" /><br class="clear" />
				    <strong>Sort String:</strong>
				    <input type="text" style="width:400px" size="80" id="moviefoldername" name="movie_sort_string" value="$movie_sort_string" onkeyup="javascript:previewmovie()"><input type="button" onclick="movieClear()" value="Clear"/><br class="clear" />
				    <strong>Multi-part label:</strong>
				    <input type="text" style="width:400px" size="80" id="movieextra" name="movie_sort_extra" value="$movie_sort_extra" onkeyup="javascript:previewmovie()"><input type="button" onclick="movieClearExtra()" value="Clear"/><br class="clear" />
				    <strong>Presets:</strong>
				    <input type="button" onclick="movieSet('%title (%y)/%title (%y).%ext',' CD%1');movieExtraFolder(false)" value="In folders"/>
				    <input type="button" onclick="movieSet('%title (%y).%ext',' CD%1');movieExtraFolder(true)" value="No folders"/><br class="clear" />
				    <br/>
				    <strong>Example:</strong> <span id="previewmovie"></span>
				</fieldset>
				
				<br class="clear" />
				<fieldset class="EntryFieldSet">
				<legend class="configbox_sorting_folders">Date Sorting</legend>
				
				    <input class="radio" type="checkbox" name="enable_date_sorting" value="1" <!--#if $enable_date_sorting > 0 then "checked=1" else ""#--> /> <strong>Enable sorting and renaming of date named files</strong>
				    <br class="clear" />
				    <label><span class="label">Affected Categories:</span>
				    <select name="date_cat" multiple="multiple" size=4 class="multiple_cats">
				        <!--#for $ct in $cat_list#-->
				            <!--#if $ct != 'Default'#-->
				                <option value="$ct" <!--#if $ct in $date_categories then 'selected' else ''#--> >$ct</option>
				            <!--#end if#-->
				        <!--#end for#-->
				    </select>
				    <br class="clear" /><br/>
				    <a onclick="jQuery('#Keytable3').toggle()" style="cursor:pointer; color:white; background-color:black;"><i>&nbsp;Toggle Key&nbsp;</i></a>
				     <div id="Keytable3" style="display:none">
				     	<table>
				        <thead><tr>
			                <th align=right><small><u>Meaning</u></small></td>
			                <th><small><u>Pattern</u></small></td>
			                <th><small><u>Result</u></small></td>
				        </tr></thead>
				        <tr>
				            <td align=right><strong>Show Name:</strong></td>
				            <td>%t</td>
				            <td>Show Name</td>
						</tr><tr>
							<td></td>
				            <td>%.t</td>
				            <td>Show.Name</td>
						</tr><tr>
							<td></td>
				            <td>%_t</td>
				            <td>Show_Name</td>
						</tr><tr>
				            <td align=right><strong>Year:</strong></td>
				            <td>%y</td>
				            <td>2009</td>
						</tr><tr>
				            <td align=right><strong>Month:</strong></td>
				            <td>%m</td>
				            <td>1</td>
						</tr><tr>
							<td></td>
				            <td>%0m</td>
				            <td>01</td>
						</tr><tr>
				            <td align=right><strong>Day of month:</strong></td>
				            <td>%d</td>
				            <td>2</td>
						</tr><tr>
							<td></td>
				            <td>%0d</td>
				            <td>02</td>
						</tr><tr>
				            <td align=right><strong>Decade:</strong></td>
				            <td>%decade</td>
				            <td>00</td>
						</tr><tr>
				            <td align=right><strong>Lower Case:</strong></td>
				            <td>{TEXT}</td>
				            <td>text</td>
						</tr>
				        </table>
				    </div><br class="clear" /><br class="clear" />
				    <strong>Sort String:</strong>
				    <input type="text" size="80" id="datefoldername" name="date_sort_string" value="$date_sort_string" onkeyup="javascript:previewdate()"><input type="button" onclick="dateClear()" value="Clear"/><br class="clear" />
				    <strong>Presets:</strong>
				    <input type="button" onclick="dateSet('%t/%t - %y-%0m-%0d - %desc.%ext')" value="Show Name folder"/>
				    <input type="button" onclick="dateSet('%y-%0m/%t - %y-%0m-%0d - %desc.%ext')" value="Year-Month Folders"/>
				    <input type="button" onclick="dateSet('%y-%0m-%0d/%t - %y-%0m-%0d - %desc.%ext')" value="Daily Folders"/><br class="clear" />
				    <br/>
				    <strong>Example:</strong> <span id="previewdate"></span>
				    
				</fieldset>

				</div>
            
            </form>

<!--#include $webdir + "/config_inc_footer.tmpl"#-->
